!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BrukerTools=t():e.BrukerTools=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";e.exports={Icon:n(1)}},function(e,t,n){"use strict";const o=n(2),r=n(4),i=n(5),s=n(6),l=n(7),a=n(8);function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.instrument=e.instrument||"NMR spectrometer",this.solvents=e.solvents||[],this.experiments=e.experiments||[],this.composites=e.composites||[],this.startElement=t.startID?document.getElementById(t.startID):void 0,this.instrumentElement=t.instrumentID?document.getElementById(t.instrumentID):void 0,this.formElement=t.formID?document.getElementById(t.formID):void 0,this.iconTextElement=t.iconTextID?document.getElementById(t.iconTextID):void 0,this.errosElement=t.errorsID?document.getElementById(t.errorsID):void 0,this.form={}}c.prototype.setInstrument=function(){this.instrumentElement&&(this.instrumentElement.innerHTML=this.instrument)},c.prototype.createSolventSelect=function(e){r(e,"solvent",this.solvents)},c.prototype.createCompositeRadios=function(e){i(e,"composite",this.composites)},c.prototype.createExperimentCheckboxes=function(e){s(e,"experiments",this.experiments)},c.prototype.start=function(){this.save(),console.log("DONE")},c.prototype.monitorForm=function(e){this.formElement.addEventListener("keyup",()=>{this.createTextFile()}),this.formElement.addEventListener("click",()=>{this.createTextFile()}),this.createTextFile()},c.prototype.isPriority=function(e){let t=!0;for(let n of e)for(let e of this.experiments)if(e.label===n){t&=e.priority;break}return t},c.prototype.createTextFile=function(){let e=l(this.formElement);this.form=e;let t=[];if(e.holder||t.push("Please specify the holder"),e.user||t.push("Please specify a username"),e.solvent||t.push("Please specify the solvent"),e.code||t.push("Please specify a sample code"),e.experiments||e.composite||t.push("Please select at least one experiment"),e.experiments||(e.experiments=[]),Array.isArray(e.experiments)||(e.experiments=[e.experiments]),e.composite&&e.experiments.unshift(e.composite),t.length>0)return this.errosElement.innerHTML=t.join("<br>"),void(this.startElement.style.display="none");this.errosElement.innerHTML="",this.startElement.style.display="block";let n=this.isPriority(e.experiments),o={solvent:e.solvent,holder:e.holder,user:e.user,name:`${e.user} ${e.code} ${e.batch}`,experiments:e.experiments.map(e=>({experiment:e,priority:n}))},r=a([o],{deleteExistingHolder:!0,autoSubmit:!0});this.iconTextElement.innerHTML=r,this.text=r},c.prototype.save=function(){var e,t=new Blob([this.text],{type:"text/plain;charset=utf-8"});(o.saveAs(t,`${this.form.user}_${this.form.code}_${this.form.batch}.txt`),$("#confirm").length)&&($("#confirm span").length&&(e=$("#confirm span").text()),$("#confirm div").dialog({title:e,modal:!0,open:()=>{setTimeout(function(){window.location.reload()},5e3)}}))},e.exports=c},function(e,t,n){(function(n){var o,r,i;r=[],void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){s(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,s){var l=i.URL||i.webkitURL,a=document.createElement("a");n=n||e.name||"download",a.download=n,a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?r(a):o(a.href)?t(e,n,s):r(a,a.target="_blank")):(a.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(a.href)},4e4),setTimeout(function(){r(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(o(e))t(e,n,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){r(s)})}}:function(e,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var s="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(e)}else{var u=i.URL||i.webkitURL,p=u.createObjectURL(e);r?r.location=p:location.href=p,r=null,setTimeout(function(){u.revokeObjectURL(p)},4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?o.apply(t,r):o)||(e.exports=i)}).call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n){let o=document.getElementById(e);if(!o)throw new Error(`Element ${o} not found`);let r=document.createElement("select");r.name=t,r.id=t;for(let e of n){let t=document.createElement("option");t.value=e.label,t.innerHTML=e.description,e.selected&&(t.selected="selected"),r.appendChild(t)}o.innerHTML="",o.appendChild(r)}},function(e,t,n){"use strict";e.exports=function(e,t,n){let o=document.getElementById(e);if(o.innerHTML="",!o)throw new Error(`Element ${o} not found`);for(let e of n){let n=document.createElement("div");n.className="spaced";let r=document.createElement("input");r.type="radio",r.name=t,r.id=t,r.value=e.label,n.appendChild(r),n.appendChild(document.createTextNode(e.label)),n.appendChild(document.createElement("br"));let i=document.createElement("span");i.className="explanation",i.appendChild(document.createTextNode(e.description)),n.appendChild(i),o.appendChild(n)}}},function(e,t,n){"use strict";e.exports=function(e,t,n){let o=document.getElementById(e);if(o.innerHTML="",!o)throw new Error(`Element ${o} not found`);for(let e of n){let n=document.createElement("div");n.className="spaced";let r=document.createElement("input");r.type="checkbox",r.name=t,r.value=e.label,n.appendChild(r),n.appendChild(document.createTextNode(e.label)),n.appendChild(document.createElement("br"));let i=document.createElement("span");i.className="explanation",i.appendChild(document.createTextNode(e.description)),n.appendChild(i),o.appendChild(n)}}},function(e,t,n){"use strict";function o(e,t,n){let o=t.split("."),r=e;for(let e=0;e<o.length;e++){let t=o[e],i=o[e+1];e===o.length-1?r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(n)):r[t]=n:isNaN(i)?(r[t]||(r[t]={}),r=r[t]):(r[t]||(r[t]=[]),r=r[t])}}e.exports=function(e){if(!e||"FORM"!==e.nodeName)return;let t={};var n,r;for(n=e.elements.length-1;n>=0;n-=1)if(""!==e.elements[n].name)switch(e.elements[n].nodeName){case"INPUT":switch(e.elements[n].type){case"text":case"hidden":case"number":case"password":case"button":case"reset":case"submit":o(t,e.elements[n].name,e.elements[n].value);break;case"checkbox":case"radio":e.elements[n].checked&&o(t,e.elements[n].name,e.elements[n].value)}break;case"TEXTAREA":o(t,e.elements[n].name,e.elements[n].value);break;case"SELECT":switch(e.elements[n].type){case"select-one":o(t,e.elements[n].name,e.elements[n].value);break;case"select-multiple":let i=[];for(r=e.elements[n].options.length-1;r>=0;r-=1)e.elements[n].options[r].selected&&i.push(e.elements[n].options[r].value);o(t,e.elements[n].name,i)}break;case"BUTTON":switch(e.elements[n].type){case"reset":case"submit":case"button":o(t,e.elements[n].name,e.elements[n].value)}}return t}},function(e,t,n){"use strict";function o(e,t){return 100*t+r(e,12)}function r(e,t){if(void 0===t)throw Error("need to specify width for numberToPosition");var n=(e=e.toUpperCase().replace(/[^0-9A-Z]/g,"")).replace(/[0-9]+/,""),o=e.replace(/[A-Z]+/,"");return(function(e){for(var t=0,n=0;n<e.length;n++)t*=26,t+=e.charCodeAt(n)-64;return t}(n)-1)*t+1*o}e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.eol,i=void 0===n?"\r\n":n,s=t.plateNumber,l=void 0===s?1:s,a=t.deleteExistingHolder,c=void 0!==a&&a,u=t.autoSubmit,p=void 0!==u&&u;var m=[];for(var d of(Array.isArray(e)||(e=[e]),e)){var f=d.holder||o(d.position,l),h=d.experimentNumber||d.position?10*r(d.position,12):1;for(var v of(c&&(m.push(`USER ${d.user}`),m.push(`HOLDER ${f}`),m.push("DELETE")),m.push(`USER ${d.user}`),m.push(`HOLDER ${f}`),p||m.push("NO_SUBMIT"),m.push(`NAME ${d.name.replace(/ /g,"_")}`),d.experiments))if(m.push(`EXPNO ${h++}`),v.priority&&m.push("PRIORITY"),m.push(`SOLVENT ${v.solvent||d.solvent}`),m.push(`EXPERIMENT ${v.experiment}`),m.push(`TITLE ${d.title||d.name}`),v.parameters&&v.parameters.length>0){var y=[];for(var E of v.parameters)y.push(E.label,E.value);m.push(`PARAMETERS ${y.join(",")}`)}m.push("END"),m.push("")}return m.join(i)}}])});
//# sourceMappingURL=bruker-tools.min.js.map